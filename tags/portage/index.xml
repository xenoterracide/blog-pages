<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Portage on Caleb Cushing&#39;s blog</title>
    <link>http://blog.xenoterracide.com/tags/portage/index.xml</link>
    <description>Recent content in Portage on Caleb Cushing&#39;s blog</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language>
    <atom:link href="http://blog.xenoterracide.com/tags/portage/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>SYNC_METHOD</title>
      <link>http://blog.xenoterracide.com/post/sync_method/</link>
      <pubDate>Sat, 07 Mar 2009 20:18:00 +0000</pubDate>
      
      <guid>http://blog.xenoterracide.com/post/sync_method/</guid>
      <description>&lt;p&gt;I&amp;rsquo;m going to be pushing out an new feature to portage today, since testing has gone well.&lt;br /&gt;&lt;br /&gt;SYNC_METHOD is a new portage variable, I&amp;rsquo;ve also gone to the trouble of defining it in make.globals. The default for Regen2. is git, however, rsync and cvs have also been defined although not tested.&lt;br /&gt;&lt;br /&gt;the main benefit of SYNC_METHOD is to use one way of detecting the program you should use to detect the tree. previous variations were problematic, as rsync does not have a directory like .git and .git supports the rsync:// protocol.&lt;br /&gt;&lt;br /&gt;I&amp;rsquo;ve added these defaults to make.globals&lt;br /&gt;&lt;br /&gt;# Default sync method&lt;br /&gt;SYNC_METHOD=&amp;ldquo;git&amp;rdquo;    &lt;br /&gt;&lt;br /&gt;# Default sync mirror&lt;br /&gt;SYNC=&amp;ldquo;git://github.com/regen2/portage.git&amp;rdquo;&lt;br /&gt;&lt;br /&gt;# default git method specific settings&lt;br /&gt;PORTAGE_GIT_METHOD=&amp;ldquo;checkout&amp;rdquo;         &lt;br /&gt;PORTAGE_GIT_REMOTE=&amp;ldquo;origin/regen2.org&amp;rdquo;&lt;br /&gt;&lt;br /&gt;you may of course override them with make.conf.&lt;br /&gt;&lt;br /&gt;changes will officially be in portage-2.2_rc23-r3.&lt;div class=&#34;blogger-post-footer&#34;&gt;&lt;br /&gt;&amp;ndash;&lt;br /&gt;
This &lt;span xmlns:dc=&#34;http://purl.org/dc/elements/1.1/&#34; href=&#34;http://purl.org/dc/dcmitype/Text&#34; rel=&#34;dc:type&#34;&gt;work&lt;/span&gt; by &lt;a xmlns:cc=&#34;http://creativecommons.org/ns#&#34; href=&#34;http://www.xenoterracide.com&#34; property=&#34;cc:attributionName&#34; rel=&#34;cc:attributionURL&#34;&gt;Caleb Cushing&lt;/a&gt; is licensed under a &lt;a rel=&#34;license&#34; href=&#34;http://creativecommons.org/licenses/by-nc-sa/3.0/&#34;&gt;Creative Commons Attribution-NonCommercial-ShareAlike 3.0 Unported License&lt;/a&gt;.&lt;/div&gt;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>split package.mask</title>
      <link>http://blog.xenoterracide.com/post/split-package.mask/</link>
      <pubDate>Sat, 21 Feb 2009 23:30:00 +0000</pubDate>
      
      <guid>http://blog.xenoterracide.com/post/split-package.mask/</guid>
      <description>&lt;p&gt;There&amp;rsquo;s been a problem with ${PORTDIR}/profiles/package.mask since I added sunrise, I didn&amp;rsquo;t realize at the time the problem wouldn&amp;rsquo;t be adding atoms, it would be keeping track of when they should be removed. I&amp;rsquo;ve decided that the best way to do it is to use portages &amp;lsquo;directory concatenation&amp;rsquo; feature, I turned package.mask into a directory, it now contains a file for each overlay that has a package.mask, and one for gentoo.org and regen2.org. This will make it much easier to keep track of removals. They originals are being merged in from a package.mask &amp;lsquo;overlay&amp;rsquo; on regen2&amp;rsquo;s github account. Let me know if anything is now masked that shouldn&amp;rsquo;t be or unmasked that shouldn&amp;rsquo;t be.&lt;div class=&#34;blogger-post-footer&#34;&gt;&lt;br /&gt;&amp;ndash;&lt;br /&gt;
This &lt;span xmlns:dc=&#34;http://purl.org/dc/elements/1.1/&#34; href=&#34;http://purl.org/dc/dcmitype/Text&#34; rel=&#34;dc:type&#34;&gt;work&lt;/span&gt; by &lt;a xmlns:cc=&#34;http://creativecommons.org/ns#&#34; href=&#34;http://www.xenoterracide.com&#34; property=&#34;cc:attributionName&#34; rel=&#34;cc:attributionURL&#34;&gt;Caleb Cushing&lt;/a&gt; is licensed under a &lt;a rel=&#34;license&#34; href=&#34;http://creativecommons.org/licenses/by-nc-sa/3.0/&#34;&gt;Creative Commons Attribution-NonCommercial-ShareAlike 3.0 Unported License&lt;/a&gt;.&lt;/div&gt;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>USE=&#34;experimental-git&#34; sys-apps/portage</title>
      <link>http://blog.xenoterracide.com/post/useexperimental-git-sys-appsportage/</link>
      <pubDate>Thu, 19 Feb 2009 23:14:00 +0000</pubDate>
      
      <guid>http://blog.xenoterracide.com/post/useexperimental-git-sys-appsportage/</guid>
      <description>&lt;p&gt;drobbins recent &lt;a href=&#34;http://blog.funtoo.org/2009/02/moving-stuff-around-and-tip.html&#34;&gt;tip&lt;/a&gt; made me think, that maybe I should point out that his solution to the problem is an annoying work around. I had this problem for a while, it was caused by my having autocrlf = input in my .gitconfig settings. Several people have told me that they have this problem without changing their crlf settings for git. After a while I decided that Funtoo/Gentoo&amp;rsquo;s git handling patches were incomplete at best and unfriendly at worst. So I wrote a patch that brings complete git handling to portage.&lt;br /&gt;&lt;br /&gt;Why is it experimental? well it hasn&amp;rsquo;t been officially accepted into portage, and as far as I know I&amp;rsquo;m the only one using it. One of the reason&amp;rsquo;s it&amp;rsquo;s not officially accepted is I haven&amp;rsquo;t documented it. &lt;br /&gt;&lt;br /&gt;WARNING: enabling it will cause auto git detection to fail, so if you don&amp;rsquo;t finish setting it up portage will default to rsync.&lt;br /&gt;&lt;br /&gt;So first you need to be using my regen2 tree, or get the ebuild and the patch from my tree, and enable the experimental-git flag for sys-apps/portage.&lt;br /&gt;&lt;br /&gt;Now, like all the other protocols portage supports you need to set the SYNC variable in /etc/make.conf.&lt;br /&gt;&lt;br /&gt;&lt;code&gt;SYNC=&amp;ldquo;git://github.com/regen2/portage.git&amp;rdquo;&lt;/code&gt;&lt;br /&gt;&lt;br /&gt;the first 6 characters need to be git:// for git to work.&lt;br /&gt;&lt;br /&gt;if you don&amp;rsquo;t already have a git repository then sync will clone the repository at this url, in fact you may need to delete your portage and do a fresh clone for things to work in certain situations. I never discerned the reason for this.&lt;br /&gt;&lt;br /&gt;now you need to set your method the most reliable, yet slowest is checkout.&lt;br /&gt;&lt;br /&gt;&lt;code&gt;PORTAGE_GIT_METHOD=&amp;ldquo;checkout&amp;rdquo;&lt;/code&gt;&lt;br /&gt;&lt;br /&gt;I believe this method will never experience the problem that drobbins was referring to.&lt;br /&gt;&lt;br /&gt;for checkout you also need to set the remote branch you want to run off.&lt;br /&gt;&lt;br /&gt;&lt;code&gt;PORTAGE_GIT_REMOTE=&amp;ldquo;origin/regen2.org&amp;rdquo;&lt;/code&gt; changing this variable and resyncing will allow you to change branches. checkout is even immune to upstreams forced updates, which is why I prefer to use it myself as sometimes I force updates on my development branch.&lt;br /&gt;&lt;br /&gt;&lt;code&gt;PORTAGE_GIT_LOCAL=&amp;ldquo;regen2.org&amp;rdquo;&lt;/code&gt; is also a valid variable, however checkout doesn&amp;rsquo;t use it. It&amp;rsquo;s used by the methods rebase, which will run the git rebase command, this is recommended for people who don&amp;rsquo;t run their own remote repo yet have there own custom git patches.&lt;br /&gt;&lt;br /&gt;The final method available is merge, it works similar to the current pull behavior of portage, except it will actually merge from whatever remote you have specified into whatever local you have specified.&lt;br /&gt;&lt;br /&gt;all methods use git remote update to avoid problems figuring out where to get updates from. I had problems with git knowing what to do with pull, when my origin was my personal repo on github and where I really needed to be updating from was funtoo not origin.&lt;br /&gt;&lt;br /&gt;WARNING: git-experimental will probably be where I merge patches such as the upcoming manifest patch.&lt;div class=&#34;blogger-post-footer&#34;&gt;&lt;br /&gt;&amp;ndash;&lt;br /&gt;
This &lt;span xmlns:dc=&#34;http://purl.org/dc/elements/1.1/&#34; href=&#34;http://purl.org/dc/dcmitype/Text&#34; rel=&#34;dc:type&#34;&gt;work&lt;/span&gt; by &lt;a xmlns:cc=&#34;http://creativecommons.org/ns#&#34; href=&#34;http://www.xenoterracide.com&#34; property=&#34;cc:attributionName&#34; rel=&#34;cc:attributionURL&#34;&gt;Caleb Cushing&lt;/a&gt; is licensed under a &lt;a rel=&#34;license&#34; href=&#34;http://creativecommons.org/licenses/by-nc-sa/3.0/&#34;&gt;Creative Commons Attribution-NonCommercial-ShareAlike 3.0 Unported License&lt;/a&gt;.&lt;/div&gt;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>sync target support</title>
      <link>http://blog.xenoterracide.com/post/sync-target-support/</link>
      <pubDate>Sun, 21 Dec 2008 17:40:00 +0000</pubDate>
      
      <guid>http://blog.xenoterracide.com/post/sync-target-support/</guid>
      <description>&lt;p&gt;&lt;a href=&#34;http://xenoterracide.blogspot.com/2008/12/sync-should-be-sync.html&#34;&gt;Here&lt;/a&gt; I explain why emerge &amp;ndash;sync should return to it&amp;rsquo;s original sync form.&lt;br /&gt;&lt;br /&gt;I think emerge sync should have the ability to have a target. Currently emerge &amp;ndash;sync has a target of the SYNC variable in make.conf or the default hardcoded. However, git support is being added to portage. git is a very powerful tool, and the &lt;a href=&#34;http://funtoo.org&#34;&gt;Funtoo&lt;/a&gt; project uses it to manage it&amp;rsquo;s full portage tree. git doesn&amp;rsquo;t work like rsync, it&amp;rsquo;s not so straight forward as rsync uri, which is effectively what emerge sync is doing. git supports branches. The current implementation of git in portage effectively does git pull &amp;hellip; which is great&amp;hellip; you know if you pull from the default.&lt;br /&gt;&lt;br /&gt;I don&amp;rsquo;t, and I&amp;rsquo;m not sure I&amp;rsquo;d always want to, it&amp;rsquo;d be great to be able to change tree&amp;rsquo;s on the fly with a more distributed model. If I want to test funtoo without pulling it&amp;rsquo;s tree into mine I could emerge sync funtoo funtoo.org, or I could switch to gentoo by doing an emerge sync rsync://rsync.gentoo.org/gentoo-portage and none of this will change the default or require configuring in make.conf. &lt;br /&gt;&lt;br /&gt;Biggest reason to do this is branches though. what if I have a development branch and I need to test something&amp;hellip; I, in theory should be able to change the branch quickly. with git I will have to cd to PORTDIR then run checkout. with portages current implementation I&amp;rsquo;ll have to reconfigure some of git and then do a sync. However, if I were able to add a target to it I could easily do emerge sync origin development or emerge sync origin master.&lt;br /&gt;&lt;br /&gt;The SYNC variable and maybe some GIT_BRANCH variable could still define defaults while adding a target would make development and testing easier for developers and testers respectively.&lt;div class=&#34;blogger-post-footer&#34;&gt;&lt;br /&gt;&amp;ndash;&lt;br /&gt;
This &lt;span xmlns:dc=&#34;http://purl.org/dc/elements/1.1/&#34; href=&#34;http://purl.org/dc/dcmitype/Text&#34; rel=&#34;dc:type&#34;&gt;work&lt;/span&gt; by &lt;a xmlns:cc=&#34;http://creativecommons.org/ns#&#34; href=&#34;http://www.xenoterracide.com&#34; property=&#34;cc:attributionName&#34; rel=&#34;cc:attributionURL&#34;&gt;Caleb Cushing&lt;/a&gt; is licensed under a &lt;a rel=&#34;license&#34; href=&#34;http://creativecommons.org/licenses/by-nc-sa/3.0/&#34;&gt;Creative Commons Attribution-NonCommercial-ShareAlike 3.0 Unported License&lt;/a&gt;.&lt;/div&gt;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>--sync should be sync</title>
      <link>http://blog.xenoterracide.com/post/--sync-should-be-sync/</link>
      <pubDate>Sun, 21 Dec 2008 15:32:00 +0000</pubDate>
      
      <guid>http://blog.xenoterracide.com/post/--sync-should-be-sync/</guid>
      <description>&lt;p&gt;emerge sync never should have become emerge &amp;ndash;sync, of course 2 years ago I thought it was the right thing, it isn&amp;rsquo;t though, live and learn. sync is currently an argument with the syntax of an option.&lt;br /&gt;&lt;br /&gt;&lt;br /&gt;&lt;br /&gt;&lt;em&gt;What&amp;rsquo;s the difference?&lt;/em&gt;&lt;br /&gt;&lt;br /&gt;An argument is what the command, or executable operates on. Some examples&lt;br /&gt;&lt;br /&gt;&lt;code&gt;cp file0 file1&lt;/code&gt; copies file0 to file1.&lt;br /&gt;&lt;br /&gt;&lt;code&gt;ls&lt;/code&gt; list the current working directory&lt;br /&gt;&lt;br /&gt;&lt;code&gt;ls dir0&lt;/code&gt; lists directory dir0&lt;br /&gt;&lt;br /&gt;&lt;br /&gt;&lt;br /&gt;&lt;em&gt;Right, so how is &amp;ndash;sync an argument and not an option?&lt;/em&gt;&lt;br /&gt;&lt;br /&gt;Options effect how commands operate on arguments. For example&lt;br /&gt;&lt;br /&gt;&lt;code&gt;cp file0 file1&lt;/code&gt; will overwrite file1 if it exists.&lt;br /&gt;&lt;br /&gt;&lt;code&gt;cp &amp;ndash;interactive file0 file1&lt;/code&gt; will prompt to overwrite if file1 exists.&lt;br /&gt;&lt;br /&gt;&lt;code&gt;ls -R&lt;/code&gt; will list any files and directories off the current working directory recursively.&lt;br /&gt;&lt;br /&gt;&lt;code&gt;ls -R dir0&lt;/code&gt; will list any files and directories off dir0 recursively.&lt;br /&gt;&lt;br /&gt;&lt;br /&gt;&lt;br /&gt;&lt;em&gt;I still don&amp;rsquo;t understand why sync isn&amp;rsquo;t an option, it isn&amp;rsquo;t a file so wouldn&amp;rsquo;t it be an option?&lt;/em&gt;&lt;br /&gt;&lt;br /&gt;Well that&amp;rsquo;s basically what I used to think, not a file not an argument. It&amp;rsquo;s not true to understand better I suggest picking up a version control system (e.g. svn) and seeing how you can have arguments that aren&amp;rsquo;t files. Example&lt;br /&gt;&lt;br /&gt;&lt;code&gt;svn checkout -r 1346&lt;/code&gt; checkout revision 1346&lt;br /&gt;&lt;br /&gt;See the -r switch is an option that operates on the checkout argument to the svn command.&lt;br /&gt;&lt;br /&gt;&lt;br /&gt;&lt;br /&gt;&lt;em&gt;Starting to get it&amp;hellip;&lt;/em&gt;&lt;br /&gt;&lt;br /&gt;&amp;ndash;sync currently doesn&amp;rsquo;t affect any target, doesn&amp;rsquo;t change a thing but isn&amp;rsquo;t a &amp;lsquo;default&amp;rsquo; either (some options are just there for explicitness and are in effect unless another option is there.&lt;div class=&#34;blogger-post-footer&#34;&gt;&lt;br /&gt;&amp;ndash;&lt;br /&gt;
This &lt;span xmlns:dc=&#34;http://purl.org/dc/elements/1.1/&#34; href=&#34;http://purl.org/dc/dcmitype/Text&#34; rel=&#34;dc:type&#34;&gt;work&lt;/span&gt; by &lt;a xmlns:cc=&#34;http://creativecommons.org/ns#&#34; href=&#34;http://www.xenoterracide.com&#34; property=&#34;cc:attributionName&#34; rel=&#34;cc:attributionURL&#34;&gt;Caleb Cushing&lt;/a&gt; is licensed under a &lt;a rel=&#34;license&#34; href=&#34;http://creativecommons.org/licenses/by-nc-sa/3.0/&#34;&gt;Creative Commons Attribution-NonCommercial-ShareAlike 3.0 Unported License&lt;/a&gt;.&lt;/div&gt;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>types of use flags</title>
      <link>http://blog.xenoterracide.com/post/types-of-use-flags/</link>
      <pubDate>Fri, 19 Dec 2008 15:03:00 +0000</pubDate>
      
      <guid>http://blog.xenoterracide.com/post/types-of-use-flags/</guid>
      <description>&lt;p&gt;Ok so I have yet another idea for portage and other portage like package managers. actually this is probably more aimed at EAPI. Different types of USE flags. The 2 I&amp;rsquo;m thinking of off the top of my head could be described as volatile and non-volatile. Basically a use flag marked volatile means a package needs to be recompiled if it gets changed one marked non-volatile most likely just pulls in another dependency or copies files such as documentation. I&amp;rsquo;m sure this feature could have lots of uses I&amp;rsquo;m not thinking of.&lt;div class=&#34;blogger-post-footer&#34;&gt;&lt;br /&gt;&amp;ndash;&lt;br /&gt;
This &lt;span xmlns:dc=&#34;http://purl.org/dc/elements/1.1/&#34; href=&#34;http://purl.org/dc/dcmitype/Text&#34; rel=&#34;dc:type&#34;&gt;work&lt;/span&gt; by &lt;a xmlns:cc=&#34;http://creativecommons.org/ns#&#34; href=&#34;http://www.xenoterracide.com&#34; property=&#34;cc:attributionName&#34; rel=&#34;cc:attributionURL&#34;&gt;Caleb Cushing&lt;/a&gt; is licensed under a &lt;a rel=&#34;license&#34; href=&#34;http://creativecommons.org/licenses/by-nc-sa/3.0/&#34;&gt;Creative Commons Attribution-NonCommercial-ShareAlike 3.0 Unported License&lt;/a&gt;.&lt;/div&gt;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Regen2 development has officially begun</title>
      <link>http://blog.xenoterracide.com/post/regen2-development-has-officially-begun/</link>
      <pubDate>Thu, 11 Dec 2008 04:30:00 +0000</pubDate>
      
      <guid>http://blog.xenoterracide.com/post/regen2-development-has-officially-begun/</guid>
      <description>&lt;p&gt;That&amp;rsquo;s right I&amp;rsquo;m putting my money where my mouth is. It&amp;rsquo;s small but the first 2 packages when into the &lt;a href=&#34;http://github.com/xenoterracide/portage/tree/regen2&#34;&gt;regen2 tree&lt;/a&gt; this morning. They are MySQL 5.1.30 which was added because the gentoo maintainer refused to add it do to instability. I agree that it is unstable, but we have ~M Hard Masked packages for that reason. It has been added as ~M. The other app added is qsynergy, the ebuild was already on portage and I know it to be good so I added it to the tree, I&amp;rsquo;ll probably stabilize it in a few weeks.&lt;br /&gt;&lt;br /&gt;Since Regen2 is a fork of &lt;a href=&#34;http://funtoo.org&#34;&gt;Funtoo&lt;/a&gt; you can enjoy all the benefits of Funtoo&amp;rsquo;s changes in my tree, and I will try to get mine accepted into Funtoo.&lt;br /&gt;&lt;br /&gt;In the future I will be building stable Regen2 tarballs, although only stage3&amp;rsquo;s.&lt;div class=&#34;blogger-post-footer&#34;&gt;&lt;br /&gt;&amp;ndash;&lt;br /&gt;
This &lt;span xmlns:dc=&#34;http://purl.org/dc/elements/1.1/&#34; href=&#34;http://purl.org/dc/dcmitype/Text&#34; rel=&#34;dc:type&#34;&gt;work&lt;/span&gt; by &lt;a xmlns:cc=&#34;http://creativecommons.org/ns#&#34; href=&#34;http://www.xenoterracide.com&#34; property=&#34;cc:attributionName&#34; rel=&#34;cc:attributionURL&#34;&gt;Caleb Cushing&lt;/a&gt; is licensed under a &lt;a rel=&#34;license&#34; href=&#34;http://creativecommons.org/licenses/by-nc-sa/3.0/&#34;&gt;Creative Commons Attribution-NonCommercial-ShareAlike 3.0 Unported License&lt;/a&gt;.&lt;/div&gt;&lt;/p&gt;
</description>
    </item>
    
  </channel>
</rss>