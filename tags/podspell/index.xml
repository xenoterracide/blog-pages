<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Podspell on Caleb Cushing&#39;s blog</title>
    <link>http://blog.xenoterracide.com/tags/podspell/index.xml</link>
    <description>Recent content in Podspell on Caleb Cushing&#39;s blog</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language>
    <atom:link href="http://blog.xenoterracide.com/tags/podspell/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>The ShareDir Problem</title>
      <link>http://blog.xenoterracide.com/post/the-sharedir-problem/</link>
      <pubDate>Thu, 27 Feb 2014 15:47:00 +0000</pubDate>
      
      <guid>http://blog.xenoterracide.com/post/the-sharedir-problem/</guid>
      <description>&lt;p&gt;&lt;p&gt;Some of you may have noticed a while back that converted &lt;a href=&#34;https://metacpan.org/module/Pod::Spell&#34;&gt;Pod::Spell&lt;/a&gt; to the use of &lt;a href=&#34;https://metacpan.org/pod/File::ShareDir::ProjectDistDir&#34;&gt;File::ShareDir::ProjectDistDir&lt;/a&gt; instead of keeping the wordlist in &lt;a href=&#34;https://metacpan.org/module/Pod::Wordlist&#34;&gt;Pod::Wordlist::&lt;strong&gt;DATA&lt;/strong&gt;&lt;/a&gt;. This move was made in conjunction with making Pod::Wordlist an Object, and in preparation for a time when you&amp;rsquo;ll be able to specify your own wordlist file. It was also made so that non technical contributors could more easily update the wordlist without going near anything that looked like code. &lt;/p&gt;&lt;p&gt;So why shouldn&amp;rsquo;t you put them in &lt;code&gt;&lt;strong&gt;DATA&lt;/strong&gt;&lt;/code&gt;? According to &lt;a href=&#34;https://metacpan.org/pod/File::ShareDir&#34;&gt;File::ShareDir&lt;/a&gt; &lt;blockquote&gt;&lt;p&gt;Quite often you want or need your Perl module (CPAN or otherwise) to have access to a large amount of read-only data that is stored on the file-system at run-time. On a linux-like system, this would be in a place such as /usr/share, however Perl runs on a wide variety of different systems, and so the use of any one location is unreliable. Perl provides a little-known method for doing this, but almost nobody is aware that it exists. As a result, module authors often go through some very strange ways to make the data available to their code.&lt;/p&gt;&lt;p&gt;The most common of these is to dump the data out to an enormous Perl data structure and save it into the module itself. The result are enormous multi-megabyte .pm files that chew up a lot of memory needlessly.&lt;/p&gt;&lt;p&gt;Another method is to put the data &amp;ldquo;file&amp;rdquo; after the &lt;strong&gt;DATA&lt;/strong&gt; compiler tag and limit yourself to access as a filehandle.&lt;/p&gt;&lt;p&gt;The problem to solve is really quite simple.&lt;/p&gt;&lt;pre&gt;&lt;br /&gt;1. Write the data files to the system at install time.&lt;br /&gt; &lt;br /&gt;2. Know where you put them at run-time.&lt;/pre&gt;&lt;/blockquote&gt;&lt;/p&gt;&lt;p&gt;Knowing where you put them at run-time is actually still a problem, because, we don&amp;rsquo;t develop in the same spot that perl installs stuff. The first portion of the problem is, &amp;ldquo;my tests can&amp;rsquo;t find my sharedir file&amp;rdquo;. So &lt;a href=&#34;https://metacpan.org/pod/Test::File::ShareDir&#34;&gt;Test::File::ShareDir&lt;/a&gt;, which overrides the  File::ShareDir method. People say, use Test::File::ShareDir, it solves the pain, well that&amp;rsquo;s not true, they&amp;rsquo;re missing a different pain. What happens if you&amp;rsquo;re trying to run, say &lt;code&gt;bin/podspell&lt;/code&gt; from the git directory? oh right now it can&amp;rsquo;t find the sharedir file again. In that case I could probably work around it, but it&amp;rsquo;s a mild symptom of a greater problem I&amp;rsquo;ve encountered, people aren&amp;rsquo;t deploying CPAN modules, they&amp;rsquo;re deploying from git. Now I could say, &amp;ldquo;not supported&amp;rdquo;, but unfortunately I&amp;rsquo;d usually have to say that to my current boss, or coworker, whomever that may be (and I tried it, didn&amp;rsquo;t work). This isn&amp;rsquo;t actually the root of the problem with Pod::Spell, but I guarantee it was a problem with &lt;a href=&#34;https://metacpan.org/module/Business::CyberSource&#34;&gt;Business::CyberSource&lt;/a&gt;. Mostly I feel like leaving Pod::Spell this way is helping to weed out the issues people will have with File::ShareDir::ProjectDistDir&lt;/p&gt; &lt;p&gt;So what do I think the solution is? There are obviously numerous &amp;ldquo;social&amp;rdquo; problems here, that I don&amp;rsquo;t think can be easily solved. I&amp;rsquo;m sure that &lt;a href=&#34;https://metacpan.org/author/KENTNL&#34;&gt;Kent Fredric&lt;/a&gt;, has a better grasp than I of the technical solutions. Though I have had one reoccurring idea which is apparently not tangible without significant effort. Have a searchable sharedir path, like in unix &lt;code&gt;PERL5_SHAREDIR=&amp;ldquo;./share:$DETECTED_DEV_DIR:$PERL5_LIB&amp;hellip;&amp;rdquo;&lt;/code&gt;, and try looking for the &amp;ldquo;file in the path&amp;rdquo; until you find it, then cache that location in memory so you only have to search once per run. This is probably not a good solution for various reasons, or perhaps it&amp;rsquo;s certainly grossly oversimplified in how it could work.&lt;/p&gt; &lt;p&gt;Ultimately, there isn&amp;rsquo;t a good solution right now, and I&amp;rsquo;m not sure we&amp;rsquo;ve actually thought of one.&lt;/p&gt;&lt;div class=&#34;blogger-post-footer&#34;&gt;&lt;br /&gt;&amp;ndash;&lt;br /&gt;
This &lt;span xmlns:dc=&#34;http://purl.org/dc/elements/1.1/&#34; href=&#34;http://purl.org/dc/dcmitype/Text&#34; rel=&#34;dc:type&#34;&gt;work&lt;/span&gt; by &lt;a xmlns:cc=&#34;http://creativecommons.org/ns#&#34; href=&#34;http://www.xenoterracide.com&#34; property=&#34;cc:attributionName&#34; rel=&#34;cc:attributionURL&#34;&gt;Caleb Cushing&lt;/a&gt; is licensed under a &lt;a rel=&#34;license&#34; href=&#34;http://creativecommons.org/licenses/by-nc-sa/3.0/&#34;&gt;Creative Commons Attribution-NonCommercial-ShareAlike 3.0 Unported License&lt;/a&gt;.&lt;/div&gt;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Pod::Spell maintained but could use more hands</title>
      <link>http://blog.xenoterracide.com/post/podspell-maintained-but-could-use-more-hands/</link>
      <pubDate>Mon, 05 Aug 2013 04:00:00 +0000</pubDate>
      
      <guid>http://blog.xenoterracide.com/post/podspell-maintained-but-could-use-more-hands/</guid>
      <description>&lt;p&gt;Just before my abrupt departure from my former employer, I took over maintaintership of&amp;nbsp;&lt;a href=&#34;https://metacpan.org/module/Pod::Spell&#34;&gt;Pod::Spell&lt;/a&gt;. I have started working to clean up the code, add modern and more tests, and improve the wordlist. There is much to be done on this front. More tests are needed yet, to ensure no accidental breakage. There&amp;rsquo;s possibly a unicode bug lurking within Pod::Spell. More words are needed for the wordlist. Patches are welcome as I don&amp;rsquo;t have all the time in the world to work on it.&lt;div class=&#34;blogger-post-footer&#34;&gt;&lt;br /&gt;&amp;ndash;&lt;br /&gt;
This &lt;span xmlns:dc=&#34;http://purl.org/dc/elements/1.1/&#34; href=&#34;http://purl.org/dc/dcmitype/Text&#34; rel=&#34;dc:type&#34;&gt;work&lt;/span&gt; by &lt;a xmlns:cc=&#34;http://creativecommons.org/ns#&#34; href=&#34;http://www.xenoterracide.com&#34; property=&#34;cc:attributionName&#34; rel=&#34;cc:attributionURL&#34;&gt;Caleb Cushing&lt;/a&gt; is licensed under a &lt;a rel=&#34;license&#34; href=&#34;http://creativecommons.org/licenses/by-nc-sa/3.0/&#34;&gt;Creative Commons Attribution-NonCommercial-ShareAlike 3.0 Unported License&lt;/a&gt;.&lt;/div&gt;&lt;/p&gt;
</description>
    </item>
    
  </channel>
</rss>